@import "tailwindcss";

/* ─────────────────────────────────────────────────────────
   DESIGN TOKENS — Pegn AI Design System v2
   8pt grid · Inter-inspired type scale · Notion-quality
───────────────────────────────────────────────────────── */
@theme {
  /* Surfaces */
  --color-surface:           #ffffff;
  --color-surface-secondary: #f7f7f5;
  --color-surface-tertiary:  #f0f0ec;
  --color-surface-muted:     #fafaf8;
  --color-surface-overlay:   rgba(255,255,255,0.92);

  /* Panel */
  --color-panel:       #fcfcfb;
  --color-panel-hover: #f4f4f1;

  /* Borders */
  --color-border:       #e9e9e5;
  --color-border-strong:#d0d0cb;
  --color-border-focus: rgba(35,131,226,0.45);

  /* Text hierarchy */
  --color-text-primary:    #1a1915;
  --color-text-secondary:  #5a5a52;
  --color-text-tertiary:   #97978e;
  --color-text-quaternary: #bbbbb4;
  --color-text-placeholder:#b8b8b0;

  /* Brand accent */
  --color-accent:       #2383e2;
  --color-accent-hover: #1a6dca;
  --color-accent-light: #ebf3fd;
  --color-accent-muted: #d1e8fa;

  /* Semantic */
  --color-success:       #0a7a4c;
  --color-success-light: #e4f5ed;
  --color-warning:       #b87309;
  --color-warning-light: #fef3dc;
  --color-error:         #c93b37;
  --color-error-light:   #fde9e8;

  /* Purple accent (AI) */
  --color-ai:       #7c3aed;
  --color-ai-light: #f0ebfe;

  /* Fonts */
  --font-family-sans: "Plus Jakarta Sans", ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
  --font-family-mono: "JetBrains Mono", "SF Mono", ui-monospace, SFMono-Regular, monospace;

  /* Shadows — layered, natural */
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.03);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.08), 0 2px 6px rgba(0,0,0,0.04);
  --shadow-xl: 0 16px 48px rgba(0,0,0,0.10), 0 4px 12px rgba(0,0,0,0.05);
  --shadow-2xl:0 32px 80px rgba(0,0,0,0.12), 0 8px 24px rgba(0,0,0,0.06);

  /* Spotlight shadow (CommandBar, dropdowns) */
  --shadow-spotlight: 0 0 0 1px rgba(0,0,0,0.06), 0 16px 56px rgba(0,0,0,0.14), 0 4px 16px rgba(0,0,0,0.08);

  /* Radii */
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl:20px;
  --radius-full: 9999px;

  /* Motion — Framer-style easing */
  --ease-spring:   cubic-bezier(0.16, 1, 0.3, 1);
  --ease-out:      cubic-bezier(0.0, 0.0, 0.2, 1);
  --ease-in-out:   cubic-bezier(0.4, 0.0, 0.2, 1);

  --animate-fade-in:    fade-in 200ms var(--ease-out);
  --animate-slide-up:   slide-up 240ms var(--ease-spring);
  --animate-soft-pulse: soft-pulse 1.4s ease-in-out infinite;
}

/* ─────────────────────────────────────────────────────────
   KEYFRAMES
───────────────────────────────────────────────────────── */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(5px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes slide-up {
  from { opacity: 0; transform: translateY(10px) scale(0.98); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes soft-pulse {
  0%, 100% { opacity: 0.55; }
  50%       { opacity: 1; }
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ─────────────────────────────────────────────────────────
   RESET + BASE
───────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body, #root { height: 100%; }

body {
  background-color: #ffffff;
  color: #1a1915;
  font-family: var(--font-family-sans);
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* ─────────────────────────────────────────────────────────
   SCROLLBAR
───────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #d8d8d4; border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: #b8b8b2; }

/* ─────────────────────────────────────────────────────────
   SELECTION
───────────────────────────────────────────────────────── */
::selection { background: #d1e8fa; color: #1a1915; }

/* ─────────────────────────────────────────────────────────
   FOCUS
───────────────────────────────────────────────────────── */
*:focus-visible {
  outline: 2px solid rgba(35,131,226,0.5);
  outline-offset: 2px;
  border-radius: 4px;
}

/* ─────────────────────────────────────────────────────────
   MARKDOWN PREVIEW — .prose-light
───────────────────────────────────────────────────────── */
.prose-light { color: #1a1915; line-height: 1.75; }
.prose-light h1 { font-size: 1.875em; font-weight: 700; letter-spacing: -0.03em; margin: 1.2em 0 0.5em; color: #1a1915; }
.prose-light h2 { font-size: 1.375em; font-weight: 650; letter-spacing: -0.02em; margin: 1em 0 0.4em; color: #1a1915; }
.prose-light h3 { font-size: 1.125em; font-weight: 600; margin: 0.8em 0 0.3em; color: #1a1915; }
.prose-light p  { margin: 0.6em 0; }
.prose-light ul, .prose-light ol { padding-left: 1.5em; margin: 0.5em 0; }
.prose-light li { margin: 0.3em 0; }
.prose-light blockquote {
  border-left: 3px solid #e9e9e5;
  padding-left: 1em; margin: 0.8em 0;
  color: #5a5a52; font-style: italic;
}
.prose-light code {
  background: #f0f0ec; padding: 2px 6px;
  border-radius: 5px; font-size: 0.875em;
  color: #c93b37; font-family: var(--font-family-mono);
}
.prose-light pre {
  background: #f7f7f5; padding: 1em 1.25em;
  border-radius: 10px; overflow-x: auto;
  border: 1px solid #e9e9e5; margin: 0.8em 0;
}
.prose-light pre code { background: transparent; padding: 0; color: #1a1915; }
.prose-light a { color: #2383e2; text-decoration: underline; text-underline-offset: 2px; }
.prose-light a:hover { color: #1a6dca; }
.prose-light table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
.prose-light th, .prose-light td {
  border: 1px solid #e9e9e5;
  padding: 8px 14px; text-align: left;
}
.prose-light th { background: #f7f7f5; font-weight: 600; }
.prose-light hr { border: none; border-top: 1px solid #e9e9e5; margin: 1.5em 0; }

/* ─────────────────────────────────────────────────────────
   UTILITY
───────────────────────────────────────────────────────── */
.line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

/* ─────────────────────────────────────────────────────────
   KATEX — font styles
───────────────────────────────────────────────────────── */
@import "katex/dist/katex.min.css";

/* ─────────────────────────────────────────────────────────
   EDITOR BLOCKS — Callout · Toggle · Math
───────────────────────────────────────────────────────── */

/* Callout */
.editor-callout {
  display: flex; flex-direction: column; gap: 4px;
  padding: 12px 14px; border-radius: 8px;
  border-left: 3px solid var(--callout-border);
  background: var(--callout-bg); margin: 0.6em 0;
}
.editor-callout__title {
  display: flex; align-items: center; gap: 6px;
  font-size: 12.5px; font-weight: 600; color: var(--callout-color);
  text-transform: uppercase; letter-spacing: 0.04em;
}
.editor-callout__icon { font-size: 14px; line-height: 1; }
.editor-callout__body { font-size: 13.5px; color: #37352f; }
.editor-callout__body > p:first-child { margin-top: 0; }
.editor-callout__body > p:last-child  { margin-bottom: 0; }

/* Toggle */
.editor-toggle {
  border: 1px solid var(--color-border, #e9e9e5);
  border-radius: 8px; overflow: hidden; margin: 0.6em 0;
}
.editor-toggle__summary {
  padding: 8px 14px; cursor: pointer;
  font-size: 13.5px; font-weight: 500;
  color: var(--color-text-primary, #37352f);
  background: var(--color-surface-secondary, #f7f7f5);
  list-style: none; user-select: none;
  display: flex; align-items: center; gap: 6px;
}
.editor-toggle__summary::before {
  content: '▶'; font-size: 9px;
  color: var(--color-text-tertiary, #9b9b9b);
  transition: transform 0.15s ease; flex-shrink: 0;
}
.editor-toggle[open] > .editor-toggle__summary::before { transform: rotate(90deg); }
.editor-toggle__body {
  padding: 10px 14px; font-size: 13.5px;
  color: var(--color-text-primary, #37352f);
}
.editor-toggle__body > p:first-child { margin-top: 0; }
.editor-toggle__body > p:last-child  { margin-bottom: 0; }

/* KaTeX */
.katex-display { overflow-x: auto; padding: 4px 0; }
.katex-error { color: #dc2626; font-size: 0.85em; }

/* Wiki-links */
.wikilink {
  color: var(--color-accent, #2383e2);
  border-bottom: 1px solid rgba(35,131,226,0.35);
  cursor: pointer;
  transition: border-color 0.12s;
}
.wikilink:hover { border-bottom-color: var(--color-accent, #2383e2); }

/* ─────────────────────────────────────────────────────────
   CMDK — Command Palette item highlight
───────────────────────────────────────────────────────── */
[cmdk-item][aria-selected="true"] > div {
  background: var(--color-surface-secondary) !important;
}
[cmdk-item] { cursor: pointer; }
[cmdk-group-heading] { padding: 0; }
[cmdk-input] { font-family: inherit; }

/* ─────────────────────────────────────────────────────────
   REDUCED MOTION
───────────────────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
